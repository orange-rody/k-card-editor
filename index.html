<!DOCTYPE html>
<html lang = "ja">
  <head>
    <meta charset = "UTF-8">
    <title>K-Card-Editor</title>
    <link rel = "stylesheet" href = "./assets/css/index.css">
    <script src="https://www.gstatic.com/firebasejs/ui/4.7.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" 
    rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@300&family=Montserrat:wght@300&display=swap" rel="stylesheet"> 
  </head>
  <body id = "login-page">
    <h1 id = "appTitle">K-Card-Editor</h1>
    <img src = "./assets/img/k-card-image.png" id = "k-card">
    <img src = "./assets/img/k-card-image.png" id = "k-card2">    
    <div id = "firebaseui-auth-container" lang = "ja"></div>
    
    <script src = "https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
    <script src = "https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
    
    <script>
      // TODO: Replace the following with your app's Firebase project configuration
      var firebaseConfig = {
        apiKey: "AIzaSyAsdSNJ-pd_XlM2zQLD9D_tMC_fZWqaBuo",
        authDomain: "k-card-editor.firebaseapp.com",
        databaseURL: "https://k-card-editor.firebaseio.com",
        projectId: "k-card-editor",
        storageBucket: "k-card-editor.appspot.com",
        messagingSenderId: "900874596960",
        appId: "1:900874596960:web:43b32eeda2e10340210905",
        measurementId: "G-4MPPMBCVF0"
      };
  
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>
    <script>
      //Firebase UIの設定
      let uiConfig = {
        // ログイン完了時のリダイレクト先
        signInSuccessUrl: './viewer.html',
        callbacks: {
            signInSuccessWithAuthResult: function(authResult, redirectUrl) {
              //trueにするとsignInSuccessUrlで定めた場所にリダイレクトされる
              //falseにするとページは遷移しない
              return true;
            },
            uiShown: function() {
              // ログイン画面が出たときに行う作業
            }
          },
        signInFlow: 'popup',
        // 利用する認証機能
        signInOptions: [
          firebase.auth.GoogleAuthProvider.PROVIDER_ID,
          firebase.auth.EmailAuthProvider.PROVIDER_ID,
        ],
      };

      // Firebaseを使ってFirebaseUI Widgetを初期化
      let ui = new firebaseui.auth.AuthUI(firebase.auth());
      ui.start('#firebaseui-auth-container', uiConfig);

    </script>
    <script src = "./assets/js/index.js"></script>
  </body>
</html>